import{_ as w,o as d,c,a as e,t as a,n as V,r as n,b as I,d as b,g as N,w as C,f as T,v as j,F as k,e as M,k as q}from"./index-mdDJp8E9.js";import{M as E}from"./bootstrap.esm-Ceob_0pG.js";import{u as L}from"./staffStore-BvhJ4LS8.js";import{_ as U,a as z}from"./機車-D4nls2Mz.js";import{_ as A,a as G}from"./ValidationModal-BKuhvs5x.js";const H={class:"fw-bold"},J={class:"d-flex justify-content-start gap-5"},K={__name:"VehicleType",props:{car_type_title:{type:String,required:!0}},emits:["updateCar_type_title"],setup(g,{emit:y}){const r=y;function v(p){r("updateCar_type_title",p)}return(p,l)=>(d(),c("section",null,[e("p",H,a(p.$t("pages.applyStaffParking.vehicle_registration.vehicle_type")),1),e("div",J,[e("div",{class:V(["d-flex flex-column align-items-center pointer",{"gray-overlay":g.car_type_title!="汽車"}]),onClick:l[0]||(l[0]=_=>v("汽車"))},l[2]||(l[2]=[e("div",{class:"img-container"},[e("img",{src:U,alt:"汽車"})],-1)]),2),e("div",{class:V(["d-flex flex-column align-items-center pointer",{"gray-overlay":g.car_type_title!="機車"}]),onClick:l[1]||(l[1]=_=>v("機車"))},l[3]||(l[3]=[e("div",{class:"img-container"},[e("img",{src:z,alt:"機車"})],-1)]),2)])]))}},O=w(K,[["__scopeId","data-v-c04a734b"]]),Q={class:"mt-5"},W={class:"mb-3"},X={for:"plate",class:"form-label"},Y={class:"text-warning"},Z={key:0,class:"mb-3"},ee={for:"car_type",class:"form-label"},te=["value"],ae={class:"d-flex justify-content-between"},le={class:"mt-3"},se={class:"registered-list border rounded vehicle-registration"},ie={class:"d-flex justify-content-between align-items-center px-3 py-1 mt-1"},oe={class:"m-0"},ne=["onClick"],re={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},de={class:"modal-dialog modal-dialog-centered"},ce={class:"modal-content"},pe={class:"modal-header bg-secondary"},_e={class:"modal-title text-black",id:"deleteModalModalLabel"},ue={class:"modal-body"},fe={class:"modal-footer"},ve={__name:"Step2VehicleRegistration",setup(g){const y=L(),r=n("汽車");I(()=>{y.getApplicantData()});const v=[{id:1,des:"汽油車"},{id:2,des:"油電車"},{id:3,des:"電動車"},{id:4,des:"柴油車"}];function p(t){r.value=t}const l=n(null),_=n(!1),S=n({});function P(){const t={plate:{required:!0},car_type:{required:!0}};if(l.value){const{isValid:o,errorsResult:s}=l.value.validateForm(i.value,t);return o||(S.value=s,_.value=!0),o}else return console.error("FormValidator reference is not correctly initialized."),!1}function x(){_.value=!1}const i=n({}),u=n([]);function D(){i.value.car_type_title=r.value,P()&&(i.value.car_type_title=="機車"&&(i.value.car_type=5),u.value.push(i.value),i.value={})}async function F(){console.log(u.value)}let f=null;const m=n({});function R(t){const o=document.getElementById("deleteModal");f||(f=new E(o)),f.show(),m.value=u.value[t],m.value.index=t}function h(){f&&f.hide()}function B(){u.value.splice(m.value.index,1),h()}return(t,o)=>(d(),c(k,null,[b(O,{car_type_title:r.value,onUpdateCar_type_title:p},null,8,["car_type_title"]),b(G,{ref_key:"formValidatorRef",ref:l},null,512),e("form",Q,[e("div",W,[e("label",X,[N(a(t.$t("pages.applyStaffParking.vehicle_registration.plate"))+" ",1),e("span",Y," ( "+a(t.$t("pages.applyStaffParking.vehicle_registration.licensePlateInputFormat"))+" ) ",1)]),C(e("input",{type:"text",class:"form-control",id:"plate","onUpdate:modelValue":o[0]||(o[0]=s=>i.value.plate=s)},null,512),[[T,i.value.plate]])]),r.value=="汽車"?(d(),c("div",Z,[e("label",ee,a(t.$t("pages.applyStaffParking.vehicle_registration.car_type")),1),C(e("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=s=>i.value.car_type=s)},[(d(),c(k,null,M(v,s=>e("option",{key:s.id,value:s.id},a(s.des),9,te)),64))],512),[[j,i.value.car_type]])])):q("",!0)]),b(A,{showModal:_.value,errors:S.value,onClose:x},null,8,["showModal","errors"]),e("div",ae,[e("button",{class:"btn btn-secondary",onClick:D},a(t.$t("pages.applyStaffParking.vehicle_registration.next")),1),e("button",{class:"btn btn-secondary",onClick:F},a(t.$t("pages.applyStaffParking.vehicle_registration.print")),1)]),e("section",null,[e("p",le,a(t.$t("pages.applyStaffParking.vehicle_registration.plate_registered")),1),e("div",se,[e("ul",null,[(d(!0),c(k,null,M(u.value,(s,$)=>(d(),c("li",{key:$},[e("div",ie,[e("p",oe,[e("span",null,a(s.plate),1)]),e("button",{class:"btn btn-dark",onClick:me=>R($)},a(t.$t("pages.applyStaffParking.vehicle_registration.delete")),9,ne)])]))),128))])]),e("div",re,[e("div",de,[e("div",ce,[e("div",pe,[e("h5",_e,a(t.$t("pages.applyStaffParking.vehicle_registration.delete_confirm_title")),1),e("button",{type:"button",class:"btn-close",onClick:h,"aria-label":"Close"})]),e("div",ue,[e("p",null,[e("span",null,a(m.value.plate),1)]),e("p",null,a(t.$t("pages.applyStaffParking.vehicle_registration.delete_confirm_content")),1)]),e("div",fe,[e("p",{class:"pointer text-primary fw-bold",onClick:h},a(t.$t("pages.applyStaffParking.vehicle_registration.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:B},a(t.$t("pages.applyStaffParking.vehicle_registration.delete")),1)])])])])])],64))}},Se=w(ve,[["__scopeId","data-v-d6616df4"]]);export{Se as default};
