import{_ as V,r as m,b as k,c as i,a as e,t as l,F as _,d as v,w as y,v as U,f as C,g as D,n as L,l as B,j as E,h as N,o as n,k as b,m as j}from"./index-ofZBKpLt.js";import{M as z,_ as q,P as H}from"./PdfViewer-BIG7KyCV.js";import{u as X}from"./facultyStudentStore-BeaAQfSY.js";const G={class:"mt-3"},J={class:"registered-list border rounded vehicle-registration"},K={key:0,class:"me-3"},O={key:1},Q={key:2},W={class:"mt-5"},Y={class:"mb-3"},Z={for:"distance",class:"form-label"},x=["value"],ee={class:"mb-3"},te=["onClick"],ae={class:"fs-4 fw-bold px-1 py-3 align-content-center m-0"},oe={key:0,class:"img-container"},le=["onClick"],se=["onChange"],ie={class:"mb-3"},ne={class:"d-flex flex-column flex-md-row gap-md-5"},ce={class:"form-check"},de={class:"form-check-label",for:"campusToReceiveCertificate1"},ue={class:"form-check"},re={class:"form-check-label",for:"campusToReceiveCertificate2"},pe={class:"mb-3"},me={class:"modal fade",id:"introductionModal",tabindex:"-1","aria-labelledby":"introductionModalLabel","aria-hidden":"true"},_e={class:"modal-dialog modal-fullscreen modal-dialog-centered"},fe={class:"modal-content"},ve={class:"modal-header bg-secondary"},ye={class:"modal-title text-black",id:"introductionModalModalLabel"},be={class:"modal-body"},ge={class:"modal-footer"},he={class:"text-center"},ke=["disabled"],Ce={class:"modal fade",id:"comfirmModal",tabindex:"-1","aria-labelledby":"comfirmModalLabel","aria-hidden":"true"},De={class:"modal-dialog modal-dialog-centered"},Se={class:"modal-content"},Fe={class:"modal-header bg-secondary"},$e={class:"modal-title text-black",id:"comfirmModalLabel"},Me={class:"modal-body"},Pe={class:"modal-footer"},we={class:"pointer text-primary fw-bold","data-bs-dismiss":"modal"},Te="/documents/國立清華大學校園車輛管理辦法-1130626.pdf",Re={__name:"Step3UploadDocuments",setup(Ae){const p=X();let r=null;const S=()=>{const t=document.getElementById("introductionModal");r||(r=new z(t)),r.show()},f=()=>{r&&r.hide()},F=()=>{d.value=!0,f()},a=m({basic_info:{},vehicle_registered_list:[],selectedCommuteDistance:"",document_list:Array(5).fill(null),campusToReceiveCertificate:"1"});k(()=>{p.getVehicleRegisteredList(),a.value.vehicle_registered_list=p.vehicle_registered_list});const $=[{code:"TC",des:"教職員校內汽車識別證"},{code:"TE",des:"職務宿舍區汽車識別證"},{code:"SC",des:"學生汽車識別證"},{code:"HF",des:"短期汽車識別證"},{code:"TM",des:"教職員機車識別證"},{code:"TEM",des:"職務宿舍區機車識別證"},{code:"SM",des:"學生機車識別證"}],M=["5-10km","10-20km","20-30km","30-40km","40-50km","50km 以上"];a.value.selectedCommuteDistance="5-10km";function P(t,s){const o=t.target.files[0];o&&(a.value.document_list[s]=o)}function w(t){a.value.document_list[t]=null}const d=m(!1);function T(){a.value.vehicle_registered_list=a.value.vehicle_registered_list.flatMap(t=>t.car_type_title==="腳踏車"&&t.bike_num?Array(t.bike_num).fill({plate:t.plate,car_type:t.car_type,car_type_title:t.car_type_title,main_pass_code:t.main_pass_code}):t)}const g=m([]);function R(){g.value=[[{id:"1",title:"車證",form_code:"A00001",created_at:"2024-09-24 20:48:25"},{id:"2",title:"工作證",form_code:"B00002",created_at:"2024-09-24 20:48:25"},{id:"3",title:"活動",form_code:"C00003",created_at:"2024-09-24 20:48:25"},{id:"4",title:"折抵券",form_code:"D00004",created_at:"2024-09-24 20:48:25"},{id:"5",title:"活動+折抵券",form_code:"E00005",created_at:"2024-09-24 20:48:25"}]]}k(()=>{R();const t=g.value.flat().find(s=>s.title==="車證");t&&(a.value.title=t.title,a.value.form_code=t.form_code)});const h=m({});async function A(){p.getApplicantData(),a.value.basic_info=p.applicant_data,T(),a.value.document_list=a.value.document_list.filter(t=>t!==null),console.log(a.value),h.value={title:a.value.title,academic_year:a.value.basic_info.academic_year,form_code:a.value.form_code,receive_location:a.value.campusToReceiveCertificate,applicant_type:a.value.basic_info.applicant_type,applicant_number:a.value.basic_info.applicant_number,applicant:a.value.basic_info.applicant,email:a.value.basic_info.email,phone_number:a.value.basic_info.phone_number,applicant_source:a.value.basic_info.applicant_source,content:a.value.vehicle_registered_list},console.log(h.value),N.push("/query-links")}return(t,s)=>(n(),i(_,null,[e("section",null,[e("p",G,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.plate_registered")),1),e("div",J,[e("ul",null,[(n(!0),i(_,null,v(a.value.vehicle_registered_list,(o,c)=>{var u;return n(),i("li",{key:c},[e("p",null,[o.plate!="腳踏車"?(n(),i("span",K,l(o.plate),1)):b("",!0),o.car_type_title==="腳踏車"?(n(),i("span",O,[e("span",null,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+l(o.bike_num||0)+" ",1),e("span",null,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(n(),i("span",Q,l(((u=$.find(I=>I.code===o.main_pass_code))==null?void 0:u.des)||"未知"),1))])])}),128))])])]),e("form",W,[e("div",Y,[e("label",Z,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.distance")),1),y(e("select",{class:"form-select","onUpdate:modelValue":s[0]||(s[0]=o=>a.value.selectedCommuteDistance=o)},[(n(),i(_,null,v(M,o=>e("option",{key:o,value:o},l(o),9,x)),64))],512),[[U,a.value.selectedCommuteDistance]])]),e("div",ee,[e("p",null,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.upload")),1),(n(!0),i(_,null,v(a.value.document_list,(o,c)=>(n(),i("div",{key:c,class:"bg-secondary mb-3 d-flex justify-content-around justify-content-md-center align-items-center upload position-relative pointer",onClick:u=>!o&&t.$refs[`fileInput${c}`][0].click()},[e("p",ae,l((o==null?void 0:o.name)||t.$t("pages.applyFacultyStudentParking.uploadDocuments.upload")+(c+1)),1),o?b("",!0):(n(),i("div",oe,s[3]||(s[3]=[e("img",{src:q,alt:"upload"},null,-1)]))),o?(n(),i("button",{key:1,type:"button",class:"btn btn-sm position-absolute top-25 end-0",onClick:j(u=>w(c),["stop"])}," X ",8,le)):b("",!0),e("input",{type:"file",ref_for:!0,ref:`fileInput${c}`,class:"d-none",onChange:u=>P(u,c)},null,40,se)],8,te))),128))]),e("div",ie,[C(l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.campusToReceiveCertificate"))+" ",1),e("div",ne,[e("div",ce,[y(e("input",{class:"form-check-input",type:"radio",id:"campusToReceiveCertificate1","onUpdate:modelValue":s[1]||(s[1]=o=>a.value.campusToReceiveCertificate=o),value:"1"},null,512),[[D,a.value.campusToReceiveCertificate]]),e("label",de,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.primaryCampus")),1)]),e("div",ue,[y(e("input",{class:"form-check-input",type:"radio",id:"campusToReceiveCertificate2","onUpdate:modelValue":s[2]||(s[2]=o=>a.value.campusToReceiveCertificate=o),value:"2"},null,512),[[D,a.value.campusToReceiveCertificate]]),e("label",re,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.nanDaCampus")),1)])])]),e("div",pe,[e("button",{type:"button",class:L(["btn btn-secondary fw-bold w-100",{btn:!0,"btn-dark":!d.value,"btn-secondary":d.value,"fw-bold":d.value,"w-100":!0}]),style:B({color:d.value?"#702f9f":"lightgray"}),onClick:S},[s[4]||(s[4]=e("i",{class:"bi bi-check-circle"},null,-1)),C(" "+l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.certificateApplicationInstructionsRead")),1)],6)])]),e("div",me,[e("div",_e,[e("div",fe,[e("div",ve,[e("h5",ye,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.certificateApplicationInstructionsTitle")),1),e("button",{type:"button",class:"btn-close",onClick:f,"aria-label":"Close"})]),e("div",be,[E(H,{pdfUrl:Te})]),e("div",ge,[e("p",{class:"pointer text-primary fw-bold",onClick:f},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:F},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm")),1)])])])]),e("div",he,[e("button",{class:"btn btn-secondary w-100",disabled:!d.value,"data-bs-toggle":"modal","data-bs-target":"#comfirmModal"},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.apply")),9,ke)]),e("div",Ce,[e("div",De,[e("div",Se,[e("div",Fe,[e("h5",$e,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm_title")),1),s[5]||(s[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Me,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm_message")),1),e("div",Pe,[e("p",we,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.cancel")),1),e("p",{class:"pointer text-primary fw-bold","data-bs-dismiss":"modal",onClick:A},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm")),1)])])])])],64))}},Le=V(Re,[["__scopeId","data-v-aceba8f9"]]);export{Le as default};
