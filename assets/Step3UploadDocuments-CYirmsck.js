import{_ as z,r as f,b as $,c as i,a as e,t as l,F as y,d as k,k as g,w as C,v as H,f as P,g as w,n as q,l as X,j as G,h as J,o as n,m as K}from"./index-B4CO0iXE.js";import{_ as O,P as Q}from"./PdfViewer-BQ2JZu6n.js";import{u as W}from"./facultyStudentStore-DS4KWnEM.js";import{M as T}from"./bootstrap.esm-Ceob_0pG.js";const Y={class:"mt-3"},Z={class:"registered-list border rounded vehicle-registration"},x={class:"d-flex justify-content-between align-items-center px-3 py-1 mt-1"},ee={class:"m-0 d-flex align-items-center"},te={key:0,class:"me-3"},ae={key:1},le={key:2},se=["onClick"],oe={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},ie={class:"modal-dialog modal-dialog-centered"},ne={class:"modal-content"},ce={class:"modal-header bg-secondary"},de={class:"modal-title text-black",id:"deleteModalModalLabel"},re={class:"modal-body"},ue={key:0,class:"me-3"},pe={key:1},_e={key:2},me={class:"modal-footer"},ve={class:"mt-5"},fe={class:"mb-3"},ye={for:"distance",class:"form-label"},ge=["value"],be={class:"mb-3"},he=["onClick"],ke={class:"fs-4 fw-bold px-1 py-3 align-content-center m-0"},Ce={key:0,class:"img-container"},Se=["onClick"],Fe=["onChange"],De={class:"mb-3"},Me={class:"d-flex flex-column flex-md-row gap-md-5"},$e={class:"form-check"},Pe={class:"form-check-label",for:"campusToReceiveCertificate1"},we={class:"form-check"},Te={class:"form-check-label",for:"campusToReceiveCertificate2"},Re={class:"mb-3"},Ve={class:"modal fade",id:"introductionModal",tabindex:"-1","aria-labelledby":"introductionModalLabel","aria-hidden":"true"},Ie={class:"modal-dialog modal-fullscreen modal-dialog-centered"},Le={class:"modal-content"},Ae={class:"modal-header bg-secondary"},Ee={class:"modal-title text-black",id:"introductionModalModalLabel"},Ue={class:"modal-body"},Be={class:"modal-footer"},Ne={class:"text-center"},je=["disabled"],ze={class:"modal fade",id:"comfirmModal",tabindex:"-1","aria-labelledby":"comfirmModalLabel","aria-hidden":"true"},He={class:"modal-dialog modal-dialog-centered"},qe={class:"modal-content"},Xe={class:"modal-header bg-secondary"},Ge={class:"modal-title text-black",id:"comfirmModalLabel"},Je={class:"modal-body"},Ke={class:"modal-footer"},Oe={class:"pointer text-primary fw-bold","data-bs-dismiss":"modal"},Qe="/NTHU-Parking-Event-Management/documents/國立清華大學校園車輛管理辦法-1130626.pdf",We={__name:"Step3UploadDocuments",setup(Ye){const r=W();let _=null;const R=()=>{const t=document.getElementById("introductionModal");_||(_=new T(t)),_.show()},b=()=>{_&&_.hide()},V=()=>{u.value=!0,b()};let m=null;const d=f({});function I(t){const o=document.getElementById("deleteModal");m||(m=new T(o)),m.show(),d.value=a.value.vehicle_registered_list[t],d.value.index=t}function h(){m&&m.hide()}function L(){a.value.vehicle_registered_list.splice(d.value.index,1),h(),r.setVehicleRegisteredList(a.value.vehicle_registered_list)}const a=f({basic_info:{},vehicle_registered_list:[],selectedCommuteDistance:"",document_list:Array(5).fill(null),campusToReceiveCertificate:"1"});$(()=>{r.getVehicleRegisteredList(),a.value.vehicle_registered_list=r.vehicle_registered_list});const S=[{code:"TC",des:"教職員校內汽車識別證"},{code:"TE",des:"職務宿舍區汽車識別證"},{code:"SC",des:"學生汽車識別證"},{code:"HF",des:"短期汽車識別證"},{code:"TM",des:"教職員機車識別證"},{code:"TEM",des:"職務宿舍區機車識別證"},{code:"SM",des:"學生機車識別證"}],A=["5-10km","10-20km","20-30km","30-40km","40-50km","50km 以上"];a.value.selectedCommuteDistance="5-10km";function E(t,o){const v=t.target.files[0];v&&(a.value.document_list[o]=v)}function U(t){a.value.document_list[t]=null}const u=f(!1);function B(){a.value.vehicle_registered_list=a.value.vehicle_registered_list.flatMap(t=>t.car_type_title==="腳踏車"&&t.bike_num?Array(t.bike_num).fill({plate:t.plate,car_type:t.car_type,car_type_title:t.car_type_title,main_pass_code:t.main_pass_code}):t)}const F=f([]);function N(){F.value=[[{id:"1",title:"車證",form_code:"A00001",created_at:"2024-09-24 20:48:25"},{id:"2",title:"工作證",form_code:"B00002",created_at:"2024-09-24 20:48:25"},{id:"3",title:"活動",form_code:"C00003",created_at:"2024-09-24 20:48:25"},{id:"4",title:"折抵券",form_code:"D00004",created_at:"2024-09-24 20:48:25"},{id:"5",title:"活動+折抵券",form_code:"E00005",created_at:"2024-09-24 20:48:25"}]]}$(()=>{N();const t=F.value.flat().find(o=>o.title==="車證");t&&(a.value.title=t.title,a.value.form_code=t.form_code)});const D=f({});async function j(){r.getApplicantData(),a.value.basic_info=r.applicant_data,B(),a.value.document_list=a.value.document_list.filter(t=>t!==null),D.value={title:a.value.title,academic_year:a.value.basic_info.academic_year,form_code:a.value.form_code,receive_location:a.value.campusToReceiveCertificate,applicant_type:a.value.basic_info.applicant_type,applicant_number:a.value.basic_info.applicant_number,applicant:a.value.basic_info.applicant,email:a.value.basic_info.email,phone_number:a.value.basic_info.phone_number,applicant_source:a.value.basic_info.applicant_source,content:a.value.vehicle_registered_list},console.log(D.value),r.clear(),J.push("/query-links")}return(t,o)=>{var v;return n(),i(y,null,[e("section",null,[e("p",Y,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.plate_registered")),1),e("div",Z,[e("ul",null,[(n(!0),i(y,null,k(a.value.vehicle_registered_list,(s,c)=>{var p;return n(),i("li",{key:c},[e("div",x,[e("p",ee,[s.plate!="腳踏車"?(n(),i("span",te,l(s.plate),1)):g("",!0),s.car_type_title==="腳踏車"?(n(),i("span",ae,[e("span",null,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+l(s.bike_num||0)+" ",1),e("span",null,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(n(),i("span",le,l(((p=S.find(M=>M.code===s.main_pass_code))==null?void 0:p.des)||"未知"),1))]),e("button",{class:"btn btn-dark",onClick:M=>I(c)},l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete")),9,se)])])}),128))])]),e("div",oe,[e("div",ie,[e("div",ne,[e("div",ce,[e("h5",de,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete_confirm_title")),1),e("button",{type:"button",class:"btn-close",onClick:h,"aria-label":"Close"})]),e("div",re,[e("p",null,[d.value.plate!="腳踏車"?(n(),i("span",ue,l(d.value.plate),1)):g("",!0),d.value.car_type_title==="腳踏車"?(n(),i("span",pe,[e("span",null,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+l(d.value.bike_num||0)+" ",1),e("span",null,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(n(),i("span",_e,l(((v=S.find(s=>s.code===d.value.main_pass_code))==null?void 0:v.des)||"未知"),1))]),e("p",null,l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete_confirm_content")),1)]),e("div",me,[e("p",{class:"pointer text-primary fw-bold",onClick:h},l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:L},l(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete")),1)])])])])]),e("form",ve,[e("div",fe,[e("label",ye,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.distance")),1),C(e("select",{class:"form-select","onUpdate:modelValue":o[0]||(o[0]=s=>a.value.selectedCommuteDistance=s)},[(n(),i(y,null,k(A,s=>e("option",{key:s,value:s},l(s),9,ge)),64))],512),[[H,a.value.selectedCommuteDistance]])]),e("div",be,[e("p",null,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.upload")),1),(n(!0),i(y,null,k(a.value.document_list,(s,c)=>(n(),i("div",{key:c,class:"bg-secondary mb-3 d-flex justify-content-around justify-content-md-center align-items-center upload position-relative pointer",onClick:p=>!s&&t.$refs[`fileInput${c}`][0].click()},[e("p",ke,l((s==null?void 0:s.name)||t.$t("pages.applyFacultyStudentParking.uploadDocuments.upload")+(c+1)),1),s?g("",!0):(n(),i("div",Ce,o[3]||(o[3]=[e("img",{src:O,alt:"upload"},null,-1)]))),s?(n(),i("button",{key:1,type:"button",class:"btn btn-sm position-absolute top-25 end-0",onClick:K(p=>U(c),["stop"])}," X ",8,Se)):g("",!0),e("input",{type:"file",ref_for:!0,ref:`fileInput${c}`,class:"d-none",onChange:p=>E(p,c)},null,40,Fe)],8,he))),128))]),e("div",De,[P(l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.campusToReceiveCertificate"))+" ",1),e("div",Me,[e("div",$e,[C(e("input",{class:"form-check-input",type:"radio",id:"campusToReceiveCertificate1","onUpdate:modelValue":o[1]||(o[1]=s=>a.value.campusToReceiveCertificate=s),value:"1"},null,512),[[w,a.value.campusToReceiveCertificate]]),e("label",Pe,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.primaryCampus")),1)]),e("div",we,[C(e("input",{class:"form-check-input",type:"radio",id:"campusToReceiveCertificate2","onUpdate:modelValue":o[2]||(o[2]=s=>a.value.campusToReceiveCertificate=s),value:"2"},null,512),[[w,a.value.campusToReceiveCertificate]]),e("label",Te,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.nanDaCampus")),1)])])]),e("div",Re,[e("button",{type:"button",class:q(["btn btn-secondary fw-bold w-100",{btn:!0,"btn-dark":!u.value,"btn-secondary":u.value,"fw-bold":u.value,"w-100":!0}]),style:X({color:u.value?"#702f9f":"lightgray"}),onClick:R},[o[4]||(o[4]=e("i",{class:"bi bi-check-circle"},null,-1)),P(" "+l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.certificateApplicationInstructionsRead")),1)],6)])]),e("div",Ve,[e("div",Ie,[e("div",Le,[e("div",Ae,[e("h5",Ee,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.certificateApplicationInstructionsTitle")),1),e("button",{type:"button",class:"btn-close",onClick:b,"aria-label":"Close"})]),e("div",Ue,[G(Q,{pdfUrl:Qe})]),e("div",Be,[e("p",{class:"pointer text-primary fw-bold",onClick:b},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:V},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm")),1)])])])]),e("div",Ne,[e("button",{class:"btn btn-secondary w-100",disabled:!u.value,"data-bs-toggle":"modal","data-bs-target":"#comfirmModal"},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.apply")),9,je)]),e("div",ze,[e("div",He,[e("div",qe,[e("div",Xe,[e("h5",Ge,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm_title")),1),o[5]||(o[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Je,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm_message")),1),e("div",Ke,[e("p",Oe,l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.cancel")),1),e("p",{class:"pointer text-primary fw-bold","data-bs-dismiss":"modal",onClick:j},l(t.$t("pages.applyFacultyStudentParking.uploadDocuments.confirm")),1)])])])])],64)}}},at=z(We,[["__scopeId","data-v-30478010"]]);export{at as default};
