import{r as s,b as S,c as i,n as U,t as r,k as V,d,a as l,g as $,w as f,f as _,v as w,F as g,e as P,i as M,o as u}from"./index-mdDJp8E9.js";import{S as F}from"./StepNavigator-B7ti5iRJ.js";import{_ as Y,a as N}from"./ValidationModal-BKuhvs5x.js";import"./上傳申請書-CXXY70II.js";const C={class:"mb-3"},B={for:"plate",class:"form-label"},D={class:"text-warning"},L={class:"mb-3"},R={for:"phone_number",class:"form-label"},T={class:"mb-3"},q={for:"academic_year",class:"form-label"},z=["value"],H={__name:"Step3_1LoginAndUpload",setup(x){const b=s(3),o=s({}),m=s([]);S(()=>{const e=new Date().getFullYear()-1911,a=e+1;m.value=[e,a],o.value.academic_year=e});const c=s(null),p=s(!1),v=s({});function y(){const t={plate:{required:!0},phone_number:{required:!0,phone_number:!0}};if(c.value){const{isValid:e,errorsResult:a}=c.value.validateForm(o.value,t);return e||(v.value=a,p.value=!0),e}else return console.error("FormValidator reference is not correctly initialized."),!1}function h(){p.value=!1}const n=s("");function k(){y()&&(o.value.plate=="AAA-1111"&&o.value.phone_number=="0909123456"?(n.value="success",M.push("/apply-staff-parking/step3_2")):n.value="fail",A())}function A(){setTimeout(()=>{n.value=""},2e3)}return(t,e)=>(u(),i(g,null,[n.value?(u(),i("div",{key:0,class:U(["alert",n.value=="success"?"alert-success":"alert-danger"]),role:"alert"},r(n.value=="success"?t.$t("pages.applyStaffParking.loginAndUpload.success"):t.$t("pages.applyStaffParking.loginAndUpload.fail")),3)):V("",!0),d(F,{currentStep:b.value},null,8,["currentStep"]),d(N,{ref_key:"formValidatorRef",ref:c},null,512),l("form",null,[l("div",C,[l("label",B,[$(r(t.$t("pages.applyStaffParking.loginAndUpload.plate"))+" ",1),l("span",D," ( "+r(t.$t("pages.applyStaffParking.loginAndUpload.licensePlateInputFormat"))+" ) ",1)]),f(l("input",{type:"text",class:"form-control",id:"plate","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.plate=a)},null,512),[[_,o.value.plate]])]),l("div",L,[l("label",R,r(t.$t("pages.applyStaffParking.loginAndUpload.phone_number")),1),f(l("input",{type:"text",class:"form-control",id:"phone_number","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.phone_number=a)},null,512),[[_,o.value.phone_number]]),l("div",T,[l("label",q,r(t.$t("pages.applyStaffParking.loginAndUpload.academic_year")),1),f(l("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>o.value.academic_year=a)},[(u(!0),i(g,null,P(m.value,a=>(u(),i("option",{key:a,value:a},r(a),9,z))),128))],512),[[w,o.value.academic_year]])])])]),d(Y,{showModal:p.value,errors:v.value,onClose:h},null,8,["showModal","errors"]),l("button",{class:"btn btn-secondary w-100",onClick:k},r(t.$t("pages.applyStaffParking.loginAndUpload.loginAndUpload")),1)],64))}};export{H as default};
