import{_ as w,r as p,b as y,c as i,a as e,t as o,F as m,d as _,w as f,v as F,f as k,g as h,n as A,l as I,h as L,o as n,k as v,m as U}from"./index-Bb6v8YAd.js";import{u as V}from"./facultyStudentStore-D4UllGrf.js";const B="/NTHU-Parking-Event-Management/images/upload/upload.svg",E={class:"mt-3"},N={class:"registered-list border rounded vehicle-registration"},j={key:0,class:"me-3"},z={key:1},H={key:2},q={class:"mt-5"},X={class:"mb-3"},G={for:"distance",class:"form-label"},J=["value"],K={class:"mb-3"},O=["onClick"],Q={class:"fs-4 fw-bold px-1 py-3 align-content-center m-0"},W={key:0,class:"img-container"},Y=["onClick"],Z=["onChange"],x={class:"mb-3"},ee={class:"d-flex flex-column flex-md-row gap-md-5"},te={class:"form-check"},ae={class:"form-check-label",for:"campusToReceiveCertificate1"},se={class:"form-check"},oe={class:"form-check-label",for:"campusToReceiveCertificate2"},le={class:"mb-3"},ie={class:"modal fade",id:"introductionModal",tabindex:"-1","aria-labelledby":"introductionModalLabel","aria-hidden":"true"},ne={class:"modal-dialog modal-dialog-centered"},ce={class:"modal-content"},de={class:"modal-header bg-secondary"},re={class:"modal-title text-black",id:"introductionModalModalLabel"},ue={class:"modal-body"},pe={class:"modal-footer"},me={class:"pointer text-primary fw-bold","data-bs-dismiss":"modal"},_e={class:"text-center"},fe=["disabled"],ve={class:"modal fade",id:"comfirmModal",tabindex:"-1","aria-labelledby":"comfirmModalLabel","aria-hidden":"true"},be={class:"modal-dialog modal-dialog-centered"},ge={class:"modal-content"},ye={class:"modal-header bg-secondary"},ke={class:"modal-title text-black",id:"comfirmModalLabel"},he={class:"modal-body"},Ce={class:"modal-footer"},Se={class:"pointer text-primary fw-bold","data-bs-dismiss":"modal"},De={__name:"Step3UploadDocuments",setup($e){const u=V(),a=p({basic_info:{},vehicle_registered_list:[],selectedCommuteDistance:"",document_list:Array(5).fill(null),campusToReceiveCertificate:"1"});y(()=>{u.getVehicleRegisteredList(),a.value.vehicle_registered_list=u.vehicle_registered_list});const C=[{code:"TC",des:"教職員校內汽車識別證"},{code:"TE",des:"職務宿舍區汽車識別證"},{code:"SC",des:"學生汽車識別證"},{code:"HF",des:"短期汽車識別證"},{code:"TM",des:"教職員機車識別證"},{code:"TEM",des:"職務宿舍區機車識別證"},{code:"SM",des:"學生機車識別證"}],S=["5-10km","10-20km","20-30km","30-40km","40-50km","50km 以上"];a.value.selectedCommuteDistance="5-10km";function D(t,l){const s=t.target.files[0];s&&(a.value.document_list[l]=s)}function $(t){a.value.document_list[t]=null}const d=p(!1);function T(){a.value.vehicle_registered_list=a.value.vehicle_registered_list.flatMap(t=>t.car_type_title==="腳踏車"&&t.bike_num?Array(t.bike_num).fill({plate:t.plate,car_type:t.car_type,car_type_title:t.car_type_title,main_pass_code:t.main_pass_code}):t)}const b=p([]);function P(){b.value=[[{id:"1",title:"車證",form_code:"A00001",created_at:"2024-09-24 20:48:25"},{id:"2",title:"工作證",form_code:"B00002",created_at:"2024-09-24 20:48:25"},{id:"3",title:"活動",form_code:"C00003",created_at:"2024-09-24 20:48:25"},{id:"4",title:"折抵券",form_code:"D00004",created_at:"2024-09-24 20:48:25"},{id:"5",title:"活動+折抵券",form_code:"E00005",created_at:"2024-09-24 20:48:25"}]]}y(()=>{P();const t=b.value.flat().find(l=>l.title==="車證");t&&(a.value.title=t.title,a.value.form_code=t.form_code)});const g=p({});async function M(){u.getApplicantData(),a.value.basic_info=u.applicant_data,T(),a.value.document_list=a.value.document_list.filter(t=>t!==null),console.log(a.value),g.value={title:a.value.title,academic_year:a.value.basic_info.academic_year,form_code:a.value.form_code,receive_location:a.value.campusToReceiveCertificate,applicant_type:a.value.basic_info.applicant_type,applicant_number:a.value.basic_info.applicant_number,applicant:a.value.basic_info.applicant,email:a.value.basic_info.email,phone_number:a.value.basic_info.phone_number,applicant_source:a.value.basic_info.applicant_source,content:a.value.vehicle_registered_list},console.log(g.value),L.push("/query-links")}return(t,l)=>(n(),i(m,null,[e("section",null,[e("p",E,o(t.$t("pages.applyFacultyStudentParking.uploadDocuments.plate_registered")),1),e("div",N,[e("ul",null,[(n(!0),i(m,null,_(a.value.vehicle_registered_list,(s,c)=>{var r;return n(),i("li",{key:c},[e("p",null,[s.plate!="腳踏車"?(n(),i("span",j,o(s.plate),1)):v("",!0),s.car_type_title==="腳踏車"?(n(),i("span",z,[e("span",null,o(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+o(s.bike_num||0)+" ",1),e("span",null,o(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(n(),i("span",H,o(((r=C.find(R=>R.code===s.main_pass_code))==null?void 0:r.des)||"未知"),1))])])}),128))])])]),e("form",q,[e("div",X,[e("label",G,o(t.$t("pages.applyFacultyStudentParking.uploadDocuments.distance")),1),f(e("select",{class:"form-select","onUpdate:modelValue":l[0]||(l[0]=s=>a.value.selectedCommuteDistance=s)},[(n(),i(m,null,_(S,s=>e("option",{key:s,value:s},o(s),9,J)),64))],512),[[F,a.value.selectedCommuteDistance]])]),e("div",K,[e("p",null,o(t.$t("pages.applyFacultyStudentParking.uploadDocuments.upload")),1),(n(!0),i(m,null,_(a.value.document_list,(s,c)=>(n(),i("div",{key:c,class:"bg-secondary mb-3 d-flex justify-content-around justify-content-md-center align-items-center upload position-relative pointer",onClick:r=>!s&&t.$refs[`fileInput${c}`][0].click()},[e("p",Q,o((s==null?void 0:s.name)||t.$t("pages.applyFacultyStudentParking.uploadDocuments.upload")+(c+1)),1),s?v("",!0):(n(),i("div",W,l[4]||(l[4]=[e("img",{src:B,alt:"upload"},null,-1)]))),s?(n(),i("button",{key:1,type:"button",class:"btn btn-sm position-absolute top-25 end-0",onClick:U(r=>$(c),["stop"])}," X ",8,Y)):v("",!0),e("input",{type:"file",ref_for:!0,ref:`fileInput${c}`,class:"d-none",onChange:r=>D(r,c)},null,40,Z)],8,O))),128))]),e("div",x,[k(o(t.$t("pages.applyStaffParking.uploadDocuments.campusToReceiveCertificate"))+" ",1),e("div",ee,[e("div",te,[f(e("input",{class:"form-check-input",type:"radio",name:"campusToReceiveCertificate1",id:"campusToReceiveCertificate1","onUpdate:modelValue":l[1]||(l[1]=s=>a.value.campusToReceiveCertificate=s),value:"1"},null,512),[[h,a.value.campusToReceiveCertificate]]),e("label",ae,o(t.$t("pages.applyStaffParking.uploadDocuments.primaryCampus")),1)]),e("div",se,[f(e("input",{class:"form-check-input",type:"radio",name:"campusToReceiveCertificate2",id:"campusToReceiveCertificate2","onUpdate:modelValue":l[2]||(l[2]=s=>a.value.campusToReceiveCertificate=s),value:"2"},null,512),[[h,a.value.campusToReceiveCertificate]]),e("label",oe,o(t.$t("pages.applyStaffParking.uploadDocuments.nanDaCampus")),1)])])]),e("div",le,[e("button",{class:A(["btn btn-secondary fw-bold w-100",{btn:!0,"btn-dark":!d.value,"btn-secondary":d.value,"fw-bold":d.value,"w-100":!0}]),style:I({color:d.value?"#702f9f":"lightgray"}),"data-bs-toggle":"modal","data-bs-target":"#introductionModal"},[l[5]||(l[5]=e("i",{class:"bi bi-check-circle"},null,-1)),k(" "+o(t.$t("pages.applyStaffParking.uploadDocuments.certificateApplicationInstructionsRead")),1)],6)])]),e("div",ie,[e("div",ne,[e("div",ce,[e("div",de,[e("h5",re,o(t.$t("pages.applyStaffParking.uploadDocuments.certificateApplicationInstructionsTitle")),1),l[6]||(l[6]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",ue,o(t.$t("pages.applyStaffParking.uploadDocuments.certificateApplicationInstructionsContent")),1),e("div",pe,[e("p",me,o(t.$t("pages.applyStaffParking.basic_info.cancel")),1),e("p",{class:"pointer text-primary fw-bold","data-bs-dismiss":"modal",onClick:l[3]||(l[3]=s=>d.value=!0)},o(t.$t("pages.applyStaffParking.basic_info.confirm")),1)])])])]),e("div",_e,[e("button",{class:"btn btn-secondary w-100",disabled:!d.value,"data-bs-toggle":"modal","data-bs-target":"#comfirmModal"},o(t.$t("pages.applyStaffParking.uploadDocuments.apply")),9,fe)]),e("div",ve,[e("div",be,[e("div",ge,[e("div",ye,[e("h5",ke,o(t.$t("pages.applyStaffParking.uploadDocuments.confirm_title")),1),l[7]||(l[7]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",he,o(t.$t("pages.applyStaffParking.uploadDocuments.confirm_message")),1),e("div",Ce,[e("p",Se,o(t.$t("pages.applyStaffParking.uploadDocuments.cancel")),1),e("p",{class:"pointer text-primary fw-bold","data-bs-dismiss":"modal",onClick:M},o(t.$t("pages.applyStaffParking.uploadDocuments.confirm")),1)])])])])],64))}},Me=w(De,[["__scopeId","data-v-0624fcf9"]]);export{Me as default};
