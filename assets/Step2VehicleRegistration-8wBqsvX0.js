import{_ as q,o as s,c as i,a as e,t as a,n as C,r as d,b as V,j as K,d as w,g as O,w as S,f as N,k as v,v as j,F,e as T,i as Q}from"./index-mdDJp8E9.js";import{_ as W,a as X}from"./機車-D4nls2Mz.js";import{u as Y}from"./facultyStudentStore-DT7ykVZp.js";import{M as Z}from"./bootstrap.esm-Ceob_0pG.js";import{_ as ee,a as te}from"./ValidationModal-BKuhvs5x.js";const ae="/NTHU-Parking-Event-Management/images/vehicle/%E8%85%B3%E8%B8%8F%E8%BB%8A.svg",le={class:"fw-bold"},se={class:"d-flex justify-content-start gap-5"},ie={__name:"VehicleType",props:{car_type_title:{type:String,required:!0}},emits:["updateCar_type_title"],setup(h,{emit:y}){const r=y;function u(g){r("updateCar_type_title",g)}return(g,n)=>(s(),i("section",null,[e("p",le,a(g.$t("pages.applyFacultyStudentParking.vehicle_registration.vehicle_type")),1),e("div",se,[e("div",{class:C(["d-flex flex-column align-items-center pointer",{"gray-overlay":h.car_type_title!="汽車"}]),onClick:n[0]||(n[0]=m=>u("汽車"))},n[3]||(n[3]=[e("div",{class:"img-container"},[e("img",{src:W,alt:"汽車"})],-1)]),2),e("div",{class:C(["d-flex flex-column align-items-center pointer",{"gray-overlay":h.car_type_title!="機車"}]),onClick:n[1]||(n[1]=m=>u("機車"))},n[4]||(n[4]=[e("div",{class:"img-container"},[e("img",{src:X,alt:"機車"})],-1)]),2),e("div",{class:C(["d-flex flex-column align-items-center pointer",{"gray-overlay":h.car_type_title!="腳踏車"}]),onClick:n[2]||(n[2]=m=>u("腳踏車"))},n[5]||(n[5]=[e("div",{class:"img-container"},[e("img",{src:ae,alt:"腳踏車"})],-1)]),2)])]))}},ne=q(ie,[["__scopeId","data-v-bb6d54ab"]]),oe={class:"mt-3 fw-bold"},re={class:"mt-3"},ce={key:0,class:"mb-3"},de={for:"plate",class:"form-label"},ue={class:"text-warning"},pe={key:1,class:"mb-3"},_e={for:"main_pass_code",class:"form-label"},ve=["value"],ye={key:2,class:"mb-3"},ge={for:"car_type",class:"form-label"},me=["value"],fe={key:3,class:"mb-3"},he={for:"bike_num",class:"form-label"},ke={class:"d-flex justify-content-between"},be={class:"mt-3"},Se={class:"registered-list border rounded vehicle-registration"},Fe={class:"d-flex justify-content-between align-items-center px-3 py-1 mt-1"},$e={class:"m-0 d-flex align-items-center"},Me={key:0,class:"me-3"},Pe={key:1},Ce={key:2},Ve=["onClick"],we={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},Te={class:"modal-dialog modal-dialog-centered"},Ee={class:"modal-content"},Be={class:"modal-header bg-secondary"},Re={class:"modal-title text-black",id:"deleteModalModalLabel"},Ue={class:"modal-body"},xe={key:0,class:"me-3"},Le={key:1},Ne={key:2},je={class:"modal-footer"},qe={__name:"Step2VehicleRegistration",setup(h){const y=Y(),r=d("汽車"),u=d("pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_car");function g(t){r.value=t,r.value=="汽車"?u.value="pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_car":r.value=="機車"?u.value="pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_scooter":u.value="pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_bike"}const n=[{code:"TC",des:"教職員校內汽車識別證"},{code:"TE",des:"職務宿舍區汽車識別證"},{code:"SC",des:"學生汽車識別證"},{code:"HF",des:"短期汽車識別證"},{code:"TM",des:"教職員機車識別證"},{code:"TEM",des:"職務宿舍區機車識別證"},{code:"SM",des:"學生機車識別證"}],m=d([]);function E(){m.value=n.filter(t=>r.value==="汽車"?["TC","TE","SC","HF"].includes(t.code):r.value==="機車"?["TM","TEM","SM"].includes(t.code):[])}V(()=>{E()}),K(()=>{E()});const B=d([]);function D(){B.value=[{id:1,des:"汽油車"},{id:2,des:"油電車"},{id:3,des:"電動車"},{id:4,des:"柴油車"}]}V(()=>{D()});const o=d({plate:"",car_type:"",car_type_title:"",main_pass_code:""}),_=d([]);function I(){H()&&(r.value=="機車"?o.value.car_type=5:r.value=="腳踏車"&&(o.value.car_type=6,o.value.main_pass_code="BS",o.value.plate="腳踏車",o.value.bike_num=k.value),o.value.car_type_title=r.value,_.value.push(o.value),console.log(o.value),o.value={},k.value=null)}const $=d(null),M=d(!1),R=d({});function H(){const t={plate:{required:!0},main_pass_code:{required:!0},car_type:{required:!0}};if($.value){const{isValid:c,errorsResult:b}=$.value.validateForm(o.value,t);return c||(R.value=b,M.value=!0),c}else return console.error("FormValidator reference is not correctly initialized."),!1}function z(){M.value=!1}let f=null;const p=d({});function A(t){const c=document.getElementById("deleteModal");f||(f=new Z(c)),f.show(),p.value=_.value[t],p.value.index=t}function P(){f&&f.hide()}function G(){_.value.splice(p.value.index,1),P()}const k=d(null);function J(){y.setVehicleRegisteredList(_.value),console.log(_.value),Q.push({name:"ApplyFacultyStudentParking_step3"})}return V(()=>{y.getVehicleRegisteredList(),_.value=y.vehicle_registered_list}),(t,c)=>{var b;return s(),i(F,null,[w(ne,{car_type_title:r.value,onUpdateCar_type_title:g},null,8,["car_type_title"]),e("h3",oe,a(t.$t(u.value)),1),w(te,{ref_key:"formValidatorRef",ref:$},null,512),e("form",re,[r.value!="腳踏車"?(s(),i("div",ce,[e("label",de,[O(a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.plate"))+" ",1),e("span",ue," ( "+a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.licensePlateInputFormat"))+" ) ",1)]),S(e("input",{type:"text",class:"form-control",id:"plate","onUpdate:modelValue":c[0]||(c[0]=l=>o.value.plate=l)},null,512),[[N,o.value.plate]])])):v("",!0),r.value!="腳踏車"?(s(),i("div",pe,[e("label",_e,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_code")),1),S(e("select",{class:"form-select","onUpdate:modelValue":c[1]||(c[1]=l=>o.value.main_pass_code=l)},[(s(!0),i(F,null,T(m.value,l=>(s(),i("option",{key:l.code,value:l.code},a(l.des),9,ve))),128))],512),[[j,o.value.main_pass_code]])])):v("",!0),r.value=="汽車"?(s(),i("div",ye,[e("label",ge,a(t.$t("pages.applyStaffParking.vehicle_registration.car_type")),1),S(e("select",{class:"form-select","onUpdate:modelValue":c[2]||(c[2]=l=>o.value.car_type=l)},[(s(!0),i(F,null,T(B.value,l=>(s(),i("option",{key:l.id,value:l.id},a(l.des),9,me))),128))],512),[[j,o.value.car_type]])])):v("",!0),r.value=="腳踏車"?(s(),i("div",fe,[e("label",he,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.bike_num")),1),S(e("input",{type:"number",class:"form-control",id:"bike_num","onUpdate:modelValue":c[3]||(c[3]=l=>k.value=l)},null,512),[[N,k.value]])])):v("",!0)]),e("div",ke,[e("button",{class:"btn btn-secondary",onClick:I},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.register")),1),e("button",{class:"btn btn-secondary",onClick:J},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.next")),1)]),w(ee,{showModal:M.value,errors:R.value,onClose:z},null,8,["showModal","errors"]),e("section",null,[e("p",be,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.plate_registered")),1),e("div",Se,[e("ul",null,[(s(!0),i(F,null,T(_.value,(l,U)=>{var x;return s(),i("li",{key:U},[e("div",Fe,[e("p",$e,[l.plate!="腳踏車"?(s(),i("span",Me,a(l.plate),1)):v("",!0),l.car_type_title==="腳踏車"?(s(),i("span",Pe,[e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+a(l.bike_num||0)+" ",1),e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(s(),i("span",Ce,a(((x=n.find(L=>L.code===l.main_pass_code))==null?void 0:x.des)||"未知"),1))]),e("button",{class:"btn btn-dark",onClick:L=>A(U)},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete")),9,Ve)])])}),128))])]),e("div",we,[e("div",Te,[e("div",Ee,[e("div",Be,[e("h5",Re,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete_confirm_title")),1),e("button",{type:"button",class:"btn-close",onClick:P,"aria-label":"Close"})]),e("div",Ue,[e("p",null,[p.value.plate!="腳踏車"?(s(),i("span",xe,a(p.value.plate),1)):v("",!0),p.value.car_type_title==="腳踏車"?(s(),i("span",Le,[e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+a(p.value.bike_num||0)+" ",1),e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(s(),i("span",Ne,a(((b=n.find(l=>l.code===p.value.main_pass_code))==null?void 0:b.des)||"未知"),1))]),e("p",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete_confirm_content")),1)]),e("div",je,[e("p",{class:"pointer text-primary fw-bold",onClick:P},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:G},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete")),1)])])])])])],64)}}},Ge=q(qe,[["__scopeId","data-v-2af7a9b0"]]);export{Ge as default};
