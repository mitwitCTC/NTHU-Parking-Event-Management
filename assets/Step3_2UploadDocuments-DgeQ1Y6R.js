import{_ as D,r as g,b as M,o as i,c,a as e,t as o,F as _,e as v,w as h,v as V,g as b,h as y,n as I,l as W,f as x,d as k,i as L,k as C,m as N}from"./index-mdDJp8E9.js";import{_ as B,P as E}from"./PdfViewer-D7rF-gtL.js";import{M as F}from"./bootstrap.esm-Ceob_0pG.js";const j=120,z=40,H=24,X="#333",q={__name:"TheCaptcha",setup(S){const n=g("");function m(){const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";n.value=Array.from({length:5},()=>r.charAt(Math.floor(Math.random()*r.length))).join(""),console.log("驗證碼是",n.value)}return M(m),(r,f)=>(i(),c("svg",{width:j,height:z,onClick:m},[f[0]||(f[0]=e("rect",{width:"100%",height:"100%",fill:"#f3f4f6"},null,-1)),e("text",{x:"50%",y:"50%","dominant-baseline":"middle","text-anchor":"middle",fill:X,"font-size":H,"font-family":"monospace"},o(n.value),1)]))}},G=D(q,[["__scopeId","data-v-1675e183"]]),J={class:"mt-3"},K={class:"registered-list border rounded vehicle-registration"},Q={class:"me-3"},Y={class:"mt-5"},Z={class:"mb-3"},O={for:"car_type",class:"form-label"},ee=["value"],te={class:"mb-3"},ae=["onClick"],oe={class:"fs-4 fw-bold px-1 py-3 align-content-center m-0"},se={key:0,class:"img-container"},le=["onClick"],ne=["onChange"],ie={class:"mb-3"},ce={class:"d-flex flex-column flex-md-row gap-md-5"},de={class:"form-check"},re={class:"form-check-label",for:"campusToReceiveCertificate1"},pe={class:"form-check"},ue={class:"form-check-label",for:"campusToReceiveCertificate2"},me={class:"mb-3"},fe={class:"mb-3"},_e={class:"d-flex justify-content-between align-items-center"},he={class:"d-flex align-items-center gap-3"},ve={for:"captcha",class:"form-label text-nowrap m-0"},ge={class:"captcha m-0"},be={class:"modal fade",id:"introductionModal",tabindex:"-1","aria-labelledby":"introductionModalLabel","aria-hidden":"true"},ye={class:"modal-dialog modal-fullscreen modal-dialog-centered"},ke={class:"modal-content"},Ce={class:"modal-header bg-secondary"},De={class:"modal-title text-black",id:"introductionModalModalLabel"},Me={class:"modal-body"},Se={class:"modal-footer"},we={class:"text-center"},$e=["disabled"],Pe={class:"modal fade",id:"comfirmModal",tabindex:"-1","aria-labelledby":"comfirmModalLabel","aria-hidden":"true"},Re={class:"modal-dialog modal-dialog-centered"},Te={class:"modal-content"},Ae={class:"modal-header bg-secondary"},Ue={class:"modal-title text-black",id:"comfirmModalLabel"},Ve={class:"modal-body"},Ie={class:"modal-footer"},We={class:"pointer text-primary fw-bold","data-bs-dismiss":"modal"},xe="/NTHU-Parking-Event-Management/documents/國立清華大學校園車輛管理辦法-1130626.pdf",Le={__name:"Step3_2UploadDocuments",setup(S){let n=null;const m=()=>{const t=document.getElementById("introductionModal");n||(n=new F(t)),n.show()},r=()=>{n&&n.hide()},f=()=>{p.value=!0,r()},s=g({vehicle_registered_list:[],selectedCommuteDistance:"",document_list:Array(5).fill(null),campusToReceiveCertificate:"1"});async function w(){s.value.vehicle_registered_list=[{plate:"RCC-7788",main_pass_code:"WC"},{plate:"RAC-2356",main_pass_code:"WC"},{plate:"RAC-2356",main_pass_code:"WM"},{plate:"RAC-2356",main_pass_code:"WC"},{plate:"RAC-2356",main_pass_code:"WM"}]}M(()=>{w()});const $=[{code:"WC",des:"工作證汽車識別證"},{code:"WM",des:"工作機車識別證"}],P=["5-10km","10-20km","20-30km","30-40km","40-50km","50km 以上"];s.value.selectedCommuteDistance="5-10km";function R(t,l){const a=t.target.files[0];a&&(s.value.document_list[l]=a)}function T(t){s.value.document_list[t]=null}const p=g(!1);async function A(){s.value.document_list=s.value.document_list.filter(t=>t!==null),console.log(s.value),L.push("/query-links")}return(t,l)=>(i(),c(_,null,[e("section",null,[e("p",J,o(t.$t("pages.applyStaffParking.uploadDocuments.plate_registered")),1),e("div",K,[e("ul",null,[(i(!0),c(_,null,v(s.value.vehicle_registered_list,(a,d)=>{var u;return i(),c("li",{key:d},[e("p",null,[e("span",Q,o(a.plate),1),e("span",null,o(((u=$.find(U=>U.code===a.main_pass_code))==null?void 0:u.des)||"未知"),1)])])}),128))])])]),e("form",Y,[e("div",Z,[e("label",O,o(t.$t("pages.applyStaffParking.uploadDocuments.distance")),1),h(e("select",{class:"form-select","onUpdate:modelValue":l[0]||(l[0]=a=>s.value.selectedCommuteDistance=a)},[(i(),c(_,null,v(P,a=>e("option",{key:a,value:a},o(a),9,ee)),64))],512),[[V,s.value.selectedCommuteDistance]])]),e("div",te,[e("p",null,o(t.$t("pages.applyStaffParking.uploadDocuments.upload")),1),(i(!0),c(_,null,v(s.value.document_list,(a,d)=>(i(),c("div",{key:d,class:"bg-secondary mb-3 d-flex justify-content-around justify-content-md-center align-items-center upload position-relative pointer",onClick:u=>!a&&t.$refs[`fileInput${d}`][0].click()},[e("p",oe,o((a==null?void 0:a.name)||t.$t("pages.applyStaffParking.uploadDocuments.upload")+(d+1)),1),a?C("",!0):(i(),c("div",se,l[4]||(l[4]=[e("img",{src:B,alt:"upload"},null,-1)]))),a?(i(),c("button",{key:1,type:"button",class:"btn btn-sm position-absolute top-25 end-0",onClick:N(u=>T(d),["stop"])}," X ",8,le)):C("",!0),e("input",{type:"file",ref_for:!0,ref:`fileInput${d}`,class:"d-none",onChange:u=>R(u,d)},null,40,ne)],8,ae))),128))]),e("div",ie,[b(o(t.$t("pages.applyStaffParking.uploadDocuments.campusToReceiveCertificate"))+" ",1),e("div",ce,[e("div",de,[h(e("input",{class:"form-check-input",type:"radio",id:"campusToReceiveCertificate1","onUpdate:modelValue":l[1]||(l[1]=a=>s.value.campusToReceiveCertificate=a),value:"1"},null,512),[[y,s.value.campusToReceiveCertificate]]),e("label",re,o(t.$t("pages.applyStaffParking.uploadDocuments.primaryCampus")),1)]),e("div",pe,[h(e("input",{class:"form-check-input",type:"radio",id:"campusToReceiveCertificate2","onUpdate:modelValue":l[2]||(l[2]=a=>s.value.campusToReceiveCertificate=a),value:"2"},null,512),[[y,s.value.campusToReceiveCertificate]]),e("label",ue,o(t.$t("pages.applyStaffParking.uploadDocuments.nanDaCampus")),1)])])]),e("div",me,[e("button",{type:"button",class:I(["btn btn-secondary fw-bold w-100",{btn:!0,"btn-dark":!p.value,"btn-secondary":p.value,"fw-bold":p.value,"w-100":!0}]),style:W({color:p.value?"#702f9f":"lightgray"}),onClick:m},[l[5]||(l[5]=e("i",{class:"bi bi-check-circle"},null,-1)),b(" "+o(t.$t("pages.applyStaffParking.uploadDocuments.certificateApplicationInstructionsRead")),1)],6)]),e("div",fe,[e("div",_e,[e("div",he,[e("label",ve,o(t.$t("pages.applyStaffParking.uploadDocuments.captcha")),1),h(e("input",{type:"text",class:"form-control",id:"captcha","onUpdate:modelValue":l[3]||(l[3]=a=>s.value.captcha=a)},null,512),[[x,s.value.captcha]])]),e("div",ge,[k(G)])])])]),e("div",be,[e("div",ye,[e("div",ke,[e("div",Ce,[e("h5",De,o(t.$t("pages.applyStaffParking.uploadDocuments.certificateApplicationInstructionsTitle")),1),e("button",{type:"button",class:"btn-close",onClick:r,"aria-label":"Close"})]),e("div",Me,[k(E,{pdfUrl:xe})]),e("div",Se,[e("p",{class:"pointer text-primary fw-bold",onClick:r},o(t.$t("pages.applyStaffParking.uploadDocuments.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:f},o(t.$t("pages.applyStaffParking.uploadDocuments.confirm")),1)])])])]),e("div",we,[e("button",{class:"btn btn-secondary w-100",disabled:!p.value,"data-bs-toggle":"modal","data-bs-target":"#comfirmModal"},o(t.$t("pages.applyStaffParking.uploadDocuments.apply")),9,$e)]),e("div",Pe,[e("div",Re,[e("div",Te,[e("div",Ae,[e("h5",Ue,o(t.$t("pages.applyStaffParking.uploadDocuments.confirm_title")),1),l[6]||(l[6]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Ve,o(t.$t("pages.applyStaffParking.uploadDocuments.confirm_message")),1),e("div",Ie,[e("p",We,o(t.$t("pages.applyStaffParking.uploadDocuments.cancel")),1),e("p",{class:"pointer text-primary fw-bold","data-bs-dismiss":"modal",onClick:A},o(t.$t("pages.applyStaffParking.uploadDocuments.confirm")),1)])])])])],64))}},Fe=D(Le,[["__scopeId","data-v-ec8e3fc6"]]);export{Fe as default};
