import{_ as q,o as s,c as i,a as e,t as a,n as C,r as c,b as V,j as K,d as w,g as O,w as S,f as N,k as v,v as j,F,e as T,i as Q}from"./index-C_sBOrdy.js";import{_ as W,a as X}from"./機車-D4nls2Mz.js";import{u as Y}from"./facultyStudentStore-BI5X66wG.js";import{M as Z}from"./bootstrap.esm-Ceob_0pG.js";import{_ as ee,a as te}from"./ValidationModal-EtMf5_a9.js";const ae="/NTHU-Parking-Event-Management/images/vehicle/%E8%85%B3%E8%B8%8F%E8%BB%8A.svg",le={class:"fw-bold"},se={class:"d-flex justify-content-start gap-5"},ie={__name:"VehicleType",props:{car_type_title:{type:String,required:!0}},emits:["updateCar_type_title"],setup(h,{emit:y}){const r=y;function u(g){r("updateCar_type_title",g)}return(g,n)=>(s(),i("section",null,[e("p",le,a(g.$t("pages.applyFacultyStudentParking.vehicle_registration.vehicle_type")),1),e("div",se,[e("div",{class:C(["d-flex flex-column align-items-center pointer",{"gray-overlay":h.car_type_title!="汽車"}]),onClick:n[0]||(n[0]=m=>u("汽車"))},n[3]||(n[3]=[e("div",{class:"img-container"},[e("img",{src:W,alt:"汽車"})],-1)]),2),e("div",{class:C(["d-flex flex-column align-items-center pointer",{"gray-overlay":h.car_type_title!="機車"}]),onClick:n[1]||(n[1]=m=>u("機車"))},n[4]||(n[4]=[e("div",{class:"img-container"},[e("img",{src:X,alt:"機車"})],-1)]),2),e("div",{class:C(["d-flex flex-column align-items-center pointer",{"gray-overlay":h.car_type_title!="腳踏車"}]),onClick:n[2]||(n[2]=m=>u("腳踏車"))},n[5]||(n[5]=[e("div",{class:"img-container"},[e("img",{src:ae,alt:"腳踏車"})],-1)]),2)])]))}},ne=q(ie,[["__scopeId","data-v-bb6d54ab"]]),oe={class:"mt-3 fw-bold"},re={class:"mt-3"},de={key:0,class:"mb-3"},ce={for:"plate",class:"form-label"},ue={class:"text-warning"},pe={key:1,class:"mb-3"},_e={for:"main_pass_code",class:"form-label"},ve=["value"],ye={key:2,class:"mb-3"},ge={for:"car_type",class:"form-label"},me=["value"],fe={key:3,class:"mb-3"},he={for:"bike_num",class:"form-label"},ke={class:"d-flex justify-content-between"},be=["disabled"],Se={class:"mt-3"},Fe={class:"registered-list border rounded vehicle-registration"},$e={class:"d-flex justify-content-between align-items-center px-3 py-1 mt-1"},Me={class:"m-0 d-flex align-items-center"},Pe={key:0,class:"me-3"},Ce={key:1},Ve={key:2},we=["onClick"],Te={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},Ee={class:"modal-dialog modal-dialog-centered"},Be={class:"modal-content"},Re={class:"modal-header bg-secondary"},Ue={class:"modal-title text-black",id:"deleteModalModalLabel"},xe={class:"modal-body"},Le={key:0,class:"me-3"},Ne={key:1},je={key:2},qe={class:"modal-footer"},De={__name:"Step2VehicleRegistration",setup(h){const y=Y(),r=c("汽車"),u=c("pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_car");function g(t){r.value=t,r.value=="汽車"?u.value="pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_car":r.value=="機車"?u.value="pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_scooter":u.value="pages.applyFacultyStudentParking.vehicle_registration.vehicle_type_bike"}const n=[{code:"TC",des:"教職員校內汽車識別證"},{code:"TE",des:"職務宿舍區汽車識別證"},{code:"SC",des:"學生汽車識別證"},{code:"HF",des:"短期汽車識別證"},{code:"TM",des:"教職員機車識別證"},{code:"TEM",des:"職務宿舍區機車識別證"},{code:"SM",des:"學生機車識別證"}],m=c([]);function E(){m.value=n.filter(t=>r.value==="汽車"?["TC","TE","SC","HF"].includes(t.code):r.value==="機車"?["TM","TEM","SM"].includes(t.code):[])}V(()=>{E()}),K(()=>{E()});const B=c([]);function D(){B.value=[{id:1,des:"汽油車"},{id:2,des:"油電車"},{id:3,des:"電動車"},{id:4,des:"柴油車"}]}V(()=>{D()});const o=c({plate:"",car_type:"",car_type_title:"",main_pass_code:""}),p=c([]);function I(){H()&&(r.value=="機車"?o.value.car_type=5:r.value=="腳踏車"&&(o.value.car_type=6,o.value.main_pass_code="BS",o.value.plate="腳踏車",o.value.bike_num=k.value),o.value.car_type_title=r.value,p.value.push(o.value),console.log(o.value),o.value={},k.value=null)}const $=c(null),M=c(!1),R=c({});function H(){const t={plate:{required:!0},main_pass_code:{required:!0},car_type:{required:!0}};if($.value){const{isValid:d,errorsResult:b}=$.value.validateForm(o.value,t);return d||(R.value=b,M.value=!0),d}else return console.error("FormValidator reference is not correctly initialized."),!1}function z(){M.value=!1}let f=null;const _=c({});function A(t){const d=document.getElementById("deleteModal");f||(f=new Z(d)),f.show(),_.value=p.value[t],_.value.index=t}function P(){f&&f.hide()}function G(){p.value.splice(_.value.index,1),P()}const k=c(null);function J(){y.setVehicleRegisteredList(p.value),console.log(p.value),Q.push({name:"ApplyFacultyStudentParking_step3"})}return V(()=>{y.getVehicleRegisteredList(),p.value=y.vehicle_registered_list}),(t,d)=>{var b;return s(),i(F,null,[w(ne,{car_type_title:r.value,onUpdateCar_type_title:g},null,8,["car_type_title"]),e("h3",oe,a(t.$t(u.value)),1),w(te,{ref_key:"formValidatorRef",ref:$},null,512),e("form",re,[r.value!="腳踏車"?(s(),i("div",de,[e("label",ce,[O(a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.plate"))+" ",1),e("span",ue," ( "+a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.licensePlateInputFormat"))+" ) ",1)]),S(e("input",{type:"text",class:"form-control",id:"plate","onUpdate:modelValue":d[0]||(d[0]=l=>o.value.plate=l)},null,512),[[N,o.value.plate]])])):v("",!0),r.value!="腳踏車"?(s(),i("div",pe,[e("label",_e,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_code")),1),S(e("select",{class:"form-select","onUpdate:modelValue":d[1]||(d[1]=l=>o.value.main_pass_code=l)},[(s(!0),i(F,null,T(m.value,l=>(s(),i("option",{key:l.code,value:l.code},a(l.des),9,ve))),128))],512),[[j,o.value.main_pass_code]])])):v("",!0),r.value=="汽車"?(s(),i("div",ye,[e("label",ge,a(t.$t("pages.applyStaffParking.vehicle_registration.car_type")),1),S(e("select",{class:"form-select","onUpdate:modelValue":d[2]||(d[2]=l=>o.value.car_type=l)},[(s(!0),i(F,null,T(B.value,l=>(s(),i("option",{key:l.id,value:l.id},a(l.des),9,me))),128))],512),[[j,o.value.car_type]])])):v("",!0),r.value=="腳踏車"?(s(),i("div",fe,[e("label",he,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.bike_num")),1),S(e("input",{type:"number",class:"form-control",id:"bike_num","onUpdate:modelValue":d[3]||(d[3]=l=>k.value=l)},null,512),[[N,k.value]])])):v("",!0)]),e("div",ke,[e("button",{class:"btn btn-secondary",onClick:I},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.register")),1),e("button",{class:"btn btn-secondary",onClick:J,disabled:p.value.length<=0},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.next")),9,be)]),w(ee,{showModal:M.value,errors:R.value,onClose:z},null,8,["showModal","errors"]),e("section",null,[e("p",Se,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.plate_registered")),1),e("div",Fe,[e("ul",null,[(s(!0),i(F,null,T(p.value,(l,U)=>{var x;return s(),i("li",{key:U},[e("div",$e,[e("p",Me,[l.plate!="腳踏車"?(s(),i("span",Pe,a(l.plate),1)):v("",!0),l.car_type_title==="腳踏車"?(s(),i("span",Ce,[e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+a(l.bike_num||0)+" ",1),e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(s(),i("span",Ve,a(((x=n.find(L=>L.code===l.main_pass_code))==null?void 0:x.des)||"未知"),1))]),e("button",{class:"btn btn-dark",onClick:L=>A(U)},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete")),9,we)])])}),128))])]),e("div",Te,[e("div",Ee,[e("div",Be,[e("div",Re,[e("h5",Ue,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete_confirm_title")),1),e("button",{type:"button",class:"btn-close",onClick:P,"aria-label":"Close"})]),e("div",xe,[e("p",null,[_.value.plate!="腳踏車"?(s(),i("span",Le,a(_.value.plate),1)):v("",!0),_.value.car_type_title==="腳踏車"?(s(),i("span",Ne,[e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.main_pass_bike")),1),e("span",null," "+a(_.value.bike_num||0)+" ",1),e("span",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.unit")),1)])):(s(),i("span",je,a(((b=n.find(l=>l.code===_.value.main_pass_code))==null?void 0:b.des)||"未知"),1))]),e("p",null,a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete_confirm_content")),1)]),e("div",qe,[e("p",{class:"pointer text-primary fw-bold",onClick:P},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:G},a(t.$t("pages.applyFacultyStudentParking.vehicle_registration.delete")),1)])])])])])],64)}}},Je=q(De,[["__scopeId","data-v-14ff97f4"]]);export{Je as default};
