import{_ as x,o as c,c as p,a as e,t as a,n as $,r as d,b as B,d as b,g as D,w as C,f as L,v as j,F as k,e as M,k as q}from"./index-N5r9hAcS.js";import{M as E}from"./bootstrap.esm-Ceob_0pG.js";import{u as U}from"./staffStore-DBVNcYP_.js";import{_ as z,a as A}from"./機車-D4nls2Mz.js";import{_ as G,a as H}from"./ValidationModal-D1SIwlo2.js";const J={class:"fw-bold"},K={class:"d-flex justify-content-start gap-5"},O={__name:"VehicleType",props:{car_type_title:{type:String,required:!0}},emits:["updateCar_type_title"],setup(m,{emit:y}){const n=y;function v(u){n("updateCar_type_title",u)}return(u,s)=>(c(),p("section",null,[e("p",J,a(u.$t("pages.applyStaffParking.vehicle_registration.vehicle_type")),1),e("div",K,[e("div",{class:$(["d-flex flex-column align-items-center pointer",{"gray-overlay":m.car_type_title!="汽車"}]),onClick:s[0]||(s[0]=_=>v("汽車"))},s[2]||(s[2]=[e("div",{class:"img-container"},[e("img",{src:z,alt:"汽車"})],-1)]),2),e("div",{class:$(["d-flex flex-column align-items-center pointer",{"gray-overlay":m.car_type_title!="機車"}]),onClick:s[1]||(s[1]=_=>v("機車"))},s[3]||(s[3]=[e("div",{class:"img-container"},[e("img",{src:A,alt:"機車"})],-1)]),2)])]))}},Q=x(O,[["__scopeId","data-v-c04a734b"]]),W={class:"mt-5"},X={class:"mb-3"},Y={for:"plate",class:"form-label"},Z={class:"text-warning"},ee={key:0,class:"mb-3"},te={for:"car_type",class:"form-label"},ae=["value"],le={class:"d-flex justify-content-between"},se=["disabled"],ie={class:"mt-3"},oe={class:"registered-list border rounded vehicle-registration"},ne={class:"d-flex justify-content-between align-items-center px-3 py-1 mt-1"},re={class:"m-0"},de=["onClick"],ce={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},pe={class:"modal-dialog modal-dialog-centered"},ue={class:"modal-content"},_e={class:"modal-header bg-secondary"},fe={class:"modal-title text-black",id:"deleteModalModalLabel"},ve={class:"modal-body"},ge={class:"modal-footer"},me={__name:"Step2VehicleRegistration",setup(m){const y=U(),n=d("汽車");B(()=>{y.getApplicantData()});const v=[{id:1,des:"汽油車"},{id:2,des:"油電車"},{id:3,des:"電動車"},{id:4,des:"柴油車"}];function u(t){n.value=t}const s=d(null),_=d(!1),S=d({});function P(){const t={plate:{required:!0}};if(n.value=="汽車"&&(t.car_type={required:!0}),s.value){const{isValid:o,errorsResult:l}=s.value.validateForm(i.value,t);return o||(S.value=l,_.value=!0),o}else return console.error("FormValidator reference is not correctly initialized."),!1}function w(){_.value=!1}const i=d({}),r=d([]);function I(){i.value.car_type_title=n.value,P()&&(i.value.car_type_title=="機車"&&(i.value.car_type=5),F(i.value),i.value={})}function F(t){if(r.value.findIndex(l=>l.plate===t.plate)!==-1){alert("車牌已經存在，請重新輸入。The License Plate Number already exists, please re-enter it.");return}else r.value.push(t)}async function N(){console.log(r.value)}let f=null;const g=d({});function R(t){const o=document.getElementById("deleteModal");f||(f=new E(o)),f.show(),g.value=r.value[t],g.value.index=t}function h(){f&&f.hide()}function T(){r.value.splice(g.value.index,1),h()}return(t,o)=>(c(),p(k,null,[b(Q,{car_type_title:n.value,onUpdateCar_type_title:u},null,8,["car_type_title"]),b(H,{ref_key:"formValidatorRef",ref:s},null,512),e("form",W,[e("div",X,[e("label",Y,[D(a(t.$t("pages.applyStaffParking.vehicle_registration.plate"))+" ",1),e("span",Z," ( "+a(t.$t("pages.applyStaffParking.vehicle_registration.licensePlateInputFormat"))+" ) ",1)]),C(e("input",{type:"text",class:"form-control",id:"plate","onUpdate:modelValue":o[0]||(o[0]=l=>i.value.plate=l)},null,512),[[L,i.value.plate]])]),n.value=="汽車"?(c(),p("div",ee,[e("label",te,a(t.$t("pages.applyStaffParking.vehicle_registration.car_type")),1),C(e("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=l=>i.value.car_type=l)},[(c(),p(k,null,M(v,l=>e("option",{key:l.id,value:l.id},a(l.des),9,ae)),64))],512),[[j,i.value.car_type]])])):q("",!0)]),b(G,{showModal:_.value,errors:S.value,onClose:w},null,8,["showModal","errors"]),e("div",le,[e("button",{class:"btn btn-secondary",onClick:I},a(t.$t("pages.applyStaffParking.vehicle_registration.next")),1),e("button",{class:"btn btn-secondary",onClick:N,disabled:r.value.length<=0},a(t.$t("pages.applyStaffParking.vehicle_registration.print")),9,se)]),e("section",null,[e("p",ie,a(t.$t("pages.applyStaffParking.vehicle_registration.plate_registered")),1),e("div",oe,[e("ul",null,[(c(!0),p(k,null,M(r.value,(l,V)=>(c(),p("li",{key:V},[e("div",ne,[e("p",re,[e("span",null,a(l.plate),1)]),e("button",{class:"btn btn-dark",onClick:ye=>R(V)},a(t.$t("pages.applyStaffParking.vehicle_registration.delete")),9,de)])]))),128))])]),e("div",ce,[e("div",pe,[e("div",ue,[e("div",_e,[e("h5",fe,a(t.$t("pages.applyStaffParking.vehicle_registration.delete_confirm_title")),1),e("button",{type:"button",class:"btn-close",onClick:h,"aria-label":"Close"})]),e("div",ve,[e("p",null,[e("span",null,a(g.value.plate),1)]),e("p",null,a(t.$t("pages.applyStaffParking.vehicle_registration.delete_confirm_content")),1)]),e("div",ge,[e("p",{class:"pointer text-primary fw-bold",onClick:h},a(t.$t("pages.applyStaffParking.vehicle_registration.cancel")),1),e("p",{class:"pointer text-primary fw-bold",onClick:T},a(t.$t("pages.applyStaffParking.vehicle_registration.delete")),1)])])])])])],64))}},$e=x(me,[["__scopeId","data-v-4936589b"]]);export{$e as default};
